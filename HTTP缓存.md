# HTTP 缓存

## 1. 可缓存性

- 可缓存性就是设置资源是否可以被缓存。
    + public：是指这个资源经过的任何节点，都可以进行缓存，不管是浏览器还是代理服务器。
    + private：是指这个资源只有发起请求的浏览器才可以进行缓存。
    + no-cache：是指所有的节点都可以进行缓存，但是当需要用到缓存资源的时候，必须向服务端请求进行验证资源是否可用，如果可用才能使用缓存资源，不能直接使用缓存后的资源。

---

## 2. 缓存到期

- 在响应头中设置相应的 key/value 值，可以设置缓存的到期时间。
    + max-age=<seconds>：是指资源下载到浏览器经过 x 秒后，缓存就失效了，这是一个相对时间。
    + s-maxage=<seconds>：是指资源下载到代理服务器经过 x 秒后，缓存就失效了。
    + max-stale=<seconds>：这是一个浏览器在发起请求时夹带在请求头中的，当 max-age 时间到期后，如果请求头中的 max-stale 时间还没有过期，那么浏览器可以继续使用过期的缓存资源，而不会再次请求服务器。（不常用）

---

## 3. 重新验证（不常用）

- 重新验证是当 max-age 过期后，浏览器必须发送请求去服务端校验资源是否过期，不能直接使用过期的缓存资源。
    + must-revalidate：服务端设置在响应头中，指定浏览器必须发送请求进行验证。
    + proxy-revalidate：服务器设置在响应头中，指定代理服务器（缓存服务器）发送请求进行验证。

---

## 4. 其他

- no-store：在资源经过的所有节点上，都禁止进行缓存。
- no-transform：告诉代理服务器不能对资源进行改动，比如压缩等等。

---

## 5. 设置

- 设置 cache-control：可以设置多个值，中间用逗号分割。
```http
    cache-control: max-age=200, public
```